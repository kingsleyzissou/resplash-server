{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config/index.js","webpack:///./src/database/index.js","webpack:///./src/graphql/resolvers/index.js","webpack:///./src/graphql/resolvers/user.js","webpack:///./src/graphql/schema/aggregator.js","webpack:///./src/graphql/schema/base.js","webpack:///./src/graphql/schema/index.js","webpack:///./src/graphql/schema/user.js","webpack:///./src/graphql/server.js","webpack:///./src/index.js","webpack:///./src/middleware/errors/handler.js","webpack:///./src/middleware/errors/index.js","webpack:///./src/middleware/errors/reporter.js","webpack:///./src/models/user/index.js","webpack:///./src/models/user/model.js","webpack:///./src/models/user/schema.js","webpack:///./src/routes/index.js","webpack:///./src/server.js","webpack:///./src/services/auth/generateJWT.js","webpack:///./src/services/auth/index.js","webpack:///./src/services/auth/login.js","webpack:///./src/services/auth/register.js","webpack:///./src/utilities/index.js","webpack:///./src/utilities/logger.js","webpack:///./src/utilities/tantrum.js","webpack:///external \"apollo-server-express\"","webpack:///external \"bcrypt\"","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///external \"dotenv\"","webpack:///external \"express\"","webpack:///external \"helmet\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"mongoose\"","webpack:///external \"path\"","webpack:///external \"winston\""],"names":["dotenv","config","port","process","env","APP_PORT","root","path","resolve","__dirname","db","host","DB_HOST","options","useCreateIndex","useNewUrlParser","useUnifiedTopology","jwtSecret","JWT_SECRET","database","connect","mongoose","catch","error","report","connection","on","logger","userResolvers","Query","user","_","_id","User","findById","base","gql","aggregation","map","s","ApolloServer","introspection","typeDefs","resolvers","formatError","message","replace","app","server","express","listen","info","handler","status","req","res","next","send","reporter","Tantrum","Model","schema","pre","isModified","hash","bcrypt","password","err","methods","verifyPassword","cipher","plain","comparison","compare","model","Schema","username","type","String","required","name","email","created_at","Date","updated_at","router","get","post","body","response","login","register","use","errors","Router","cors","helmet","bodyParser","urlencoded","extended","json","apollo","applyMiddleware","routes","generateJWT","jwt","sign","toJSON","findOne","verified","token","save","combine","colorize","simple","format","createLogger","level","transports","Console","Error","constructor","code"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import path from 'path';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nexport default {\n  port: process.env.APP_PORT || 4000,\n  root: path.resolve(__dirname, '../', '../'),\n  db: {\n    host: process.env.DB_HOST,\n    options: {\n      useCreateIndex: true,\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n    },\n  },\n  jwtSecret: process.env.JWT_SECRET,\n};\n","import mongoose from 'mongoose';\nimport { logger } from '~/utilities';\n\nconst database = {\n  // Connect to MongoDB\n  async connect({ host, options }) {\n    // Attempt connection or else\n    // catch any connection errors\n    await mongoose.connect(host, options)\n      .catch((error) => this.report(error));\n    // Handle errors after initial connection\n    mongoose.connection.on('error', (error) => this.report(error));\n  },\n  // Report errors\n  report(error) {\n    logger.error(error);\n  },\n};\n\nexport default database;\n","import userResolvers from './user';\n\nexport default [\n  userResolvers,\n];\n","import User from '~/models/user';\n\nexport default {\n\n  Query: {\n    user: async (_, { _id }) => User.findById({ _id }),\n  },\n\n};\n","import base from './base';\nimport user from './user';\n\nexport default [base, user];\n","export default (gql) => gql`\n\n  type Query {\n    hello: String\n  }\n\n`;\n","import { gql } from 'apollo-server-express';\nimport aggregation from './aggregator';\n\nexport default aggregation.map((s) => s(gql));\n","export default (gql) => gql`\n\n  extend type Query {\n    user(_id: String): User,\n  }\n\n  type User {\n    _id: String,\n    name: String,\n    username: String,\n    email: String\n  }\n\n`;\n","import { ApolloServer } from 'apollo-server-express';\nimport typeDefs from './schema';\nimport resolvers from './resolvers';\n\nexport default new ApolloServer({\n  introspection: true,\n  typeDefs,\n  resolvers,\n  formatError: (error) => {\n    const message = error.message\n      .replace('SequelizeValidationError: ', '')\n      .replace('Validation error: ', '');\n    return {\n      ...error,\n      message,\n    };\n  },\n});\n","import express from 'express';\nimport server from '~/server';\nimport config from '~/config';\nimport database from '~/database';\nimport { logger } from '~/utilities';\n\n// Prepare the server\nconst app = server(express);\n\n// Get the server port\nconst { port, db } = config;\n\n// Connect to the database\ndatabase.connect(db);\n\n// Start the server\napp.listen(port, () => {\n  logger.info(\n    `App started on http://localhost:${port}`,\n  );\n});\n","// last method in the stack to catch\n// all errors and send the status cod\n// and error message\n// eslint-disable-next-line\nconst handler = ({ message, status }, req, res, next) => {\n  res.send({ message, status });\n};\n\nexport default handler;\n","import handler from './handler';\nimport reporter from './reporter';\n\n// export the two functions in\n// a single object\nexport default {\n  reporter,\n  handler,\n};\n","import { logger, Tantrum } from '~/utilities';\n\n// First method in the error stack\n// catches the error, logs it and\n// passes it down the stack\nconst reporter = ({ message, status }, req, res, next) => {\n  // Throw tantrum to be used for error\n  const error = new Tantrum(status, message);\n  // Log error\n  logger.error(error);\n  // Pass the error on\n  next(error);\n};\n\nexport default reporter;\n","import Model from './model';\n\nexport default Model;\n","import mongoose from 'mongoose';\nimport bcrypt from 'bcrypt';\nimport schema from './schema';\nimport { Tantrum } from '~/utilities';\n\n// Perform the following function before updating\n// the user in the database. Check if the password has\n// been modified, if so, hash the password before\n// saving.\n// eslint-disable-next-line\nschema.pre('save', async function (next) {\n  if (!this.isModified('password')) return next();\n  const hash = await bcrypt.hash(this.password, 10)\n    .catch((err) => next(err));\n  this.password = hash;\n  return next();\n});\n\n// Validate the user password\nschema.methods.verifyPassword = (async (cipher, plain) => {\n  const comparison = await bcrypt.compare(plain, cipher)\n    .catch((err) => {\n      throw new Tantrum(500, err);\n    });\n  return comparison;\n});\n\nexport default mongoose.model('user', schema);\n","import mongoose from 'mongoose';\n\nconst { Schema } = mongoose;\n\nconst schema = new Schema({\n  username: {\n    type: String,\n    required: true,\n  },\n  name: {\n    type: String,\n  },\n  email: {\n    type: String,\n    required: true,\n  },\n  password: {\n    type: String,\n    required: true,\n  },\n  created_at: Date,\n  updated_at: Date,\n});\n\nexport default schema;\n","import errors from '~/middleware/errors';\nimport { Tantrum } from '~/utilities';\nimport { login, register } from '~/services/auth';\n\nexport default (router) => {\n  router.get('/', (req, res) => {\n    res.status(200).send({ message: 'Hello there' });\n  });\n\n  // Throw tantrum to test error\n  // handling\n  router.get('/error', () => {\n    throw new Tantrum(500, 'some error');\n  });\n\n  router.post('/login', async (req, res, next) => {\n    const { username, password } = req.body;\n    const response = await login(username, password)\n      .catch((err) => next(err));\n    res.status(200).send(response);\n  });\n\n  router.post('/register', async (req, res, next) => {\n    const response = await register(req.body)\n      .catch((err) => next(err));\n    res.status(200).send(response);\n  });\n\n  // Last route to catch 404 endpoints\n  router.use((req, res, next) => {\n    const error = new Tantrum(404, 'Not found');\n    next(error);\n  });\n\n  // Catch all errors and report\n  router.use(errors.reporter);\n\n  // handle error and send response\n  // return router to be used in server\n  return router.use(errors.handler);\n};\n","import cors from 'cors';\nimport helmet from 'helmet';\nimport bodyParser from 'body-parser';\nimport routes from '~/routes';\nimport apollo from '~/graphql/server'\n\nexport default (express) => {\n  const app = express();\n  const router = express.Router();\n\n  // Enable cors\n  app.use(cors());\n\n  // Help secure the app\n  app.use(helmet());\n\n  app.use(bodyParser.urlencoded({ extended: true }));\n  app.use(bodyParser.json());\n\n  // Add apollo to the stack and provide\n  // grapql route\n  // you can now go to localhost:{port}/graphql\n  // to access the graphql playground\n  apollo.applyMiddleware({ app, path: '/graphql' });\n\n  // this statement is last\n  // so error handling can be\n  // applied\n  return app.use(routes(router));\n};\n","import jwt from 'jsonwebtoken';\nimport config from '~/config';\n\nconst generateJWT = (user) => jwt.sign(user.toJSON(), config.jwtSecret);\n\nexport default generateJWT;\n","import login from './login';\nimport register from './register';\n\nexport {\n  login, register,\n};\n","import User from '~/models/user';\nimport { Tantrum } from '~/utilities';\nimport generateJWT from './generateJWT';\n\nconst login = async (username, password) => {\n  const user = await User.findOne({ username })\n    .catch((err) => {\n      throw new Tantrum(500, err);\n    });\n  if (!user) throw new Tantrum(404, 'User not found');\n  const verified = await user.verifyPassword(user.password, password);\n  if (!verified) throw new Tantrum(403, 'Username or password incorrect');\n  return {\n    user,\n    token: generateJWT(user),\n  };\n};\n\nexport default login;\n","import User from '~/models/user';\nimport { Tantrum } from '~/utilities';\n\nconst register = async (body) => {\n  const { username, name, password, email } = body;\n  const user = new User({ username, name, password, email });\n  user.save()\n    .catch((err) => {\n      throw new Tantrum(500, err);\n    });\n};\n\nexport default register;\n","import logger from './logger';\nimport Tantrum from './tantrum';\n\nexport { logger, Tantrum };\n","import { createLogger, transports, format } from 'winston';\n\nconst { combine, colorize, simple, json } = format;\n\n// Create the logger for the app\nconst logger = createLogger({\n  level: 'info',\n  format: json(),\n  transports: [\n    new transports.Console({\n      format: combine(\n        colorize(),\n        simple(),\n      ),\n    }),\n  ],\n});\n\nexport default logger;\n","// Custom error that extends\n// the default Error object.\n// Tantrum provides the ability\n// to add status codes to the error message\nclass Tantrum extends Error {\n  constructor(code, message) {\n    super(message);\n    this.status = code;\n  }\n}\n\nexport default Tantrum;\n","module.exports = require(\"apollo-server-express\");","module.exports = require(\"bcrypt\");","module.exports = require(\"body-parser\");","module.exports = require(\"cors\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"helmet\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"mongoose\");","module.exports = require(\"path\");","module.exports = require(\"winston\");"],"sourceRoot":""}